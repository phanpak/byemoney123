---
import ProductCard from './ProductCard.astro';

// Product data with actual images from bye.money
const products = [
  {
    name: 'Mudle Crayon',
    brand: 'Odujej',
    price: '$39',
    category: 'Home',
    image: 'https://framerusercontent.com/images/tni7amhqrKIVGxFlPvl7coMF5s.png',
    slug: 'odujej-mudle-crayon',
    externalUrl: 'https://good-liver.com/products/mudle-crayon',
  },
  {
    name: 'Routine Pack "Piece By Piece"',
    brand: 'Humanrace',
    price: '$120',
    category: 'Grooming',
    image: 'https://framerusercontent.com/images/v1hks0izrAFgNnN5XHC7VHb2nsw.png',
    slug: 'humanrace-routine-pack-piece-by-piece-lego',
    externalUrl: 'https://humanrace.com/products/limited-edition-routine-pack-piece-by-piece',
  },
  {
    name: 'Image C Advance+',
    brand: 'Kalkhoff',
    price: '4200€',
    category: 'Motors',
    image: 'https://framerusercontent.com/images/FG4PoxvuzMyshZhDcijs48hLY9o.png',
    slug: 'image-c-advance',
    externalUrl: 'https://www.kalkhoff-bikes.com/fr_fr/image-c-advance',
  },
  {
    name: 'PlayStation 30th Anniversary Collection',
    brand: 'Sony',
    price: 'TBD',
    category: 'Tech',
    image: 'https://framerusercontent.com/images/dXJPH4eUW7GPQ08GwhxQ6SpqYA.png',
    slug: 'sony-the-playstation-30th-anniversary-collection',
    externalUrl: 'https://blog.playstation.com/2024/09/19/celebrating-30-years-of-playstation-with-a-nostalgic-look/',
  },
  {
    name: 'Granville 30 Carryall Bag',
    brand: "Arc'Teryx",
    price: '$160',
    category: 'Outfit',
    image: 'https://framerusercontent.com/images/MWvyj0zw8bFtR9Samfnsw6wMTpk.png',
    slug: 'arc-teryx-granville-30-carryall-bag',
    externalUrl: 'https://arcteryx.com/us/en/shop/granville-30-carryall-bag',
  },
  {
    name: 'Swell Well Catchall',
    brand: 'Heller',
    price: '129€',
    category: 'Home',
    image: 'https://framerusercontent.com/images/2XfxQHKR6I8IFVOyAxH4nTwY.png',
    slug: 'swell-well-catchall',
    externalUrl: 'https://hellerfurniture.com/products/swell-wall-catchall',
  },
  {
    name: 'Everyday Socks',
    brand: 'MoMA Nike',
    price: '$18',
    category: 'Outfit',
    image: 'https://framerusercontent.com/images/70kRNOPb585HKlqADk56bY798g0.png',
    slug: 'moma-nike-everyday-socks',
    externalUrl: 'https://store.moma.org/products/moma-nike-elite-crew-basketball-socks-lucky-green',
  },
  {
    name: 'Paper Pro',
    brand: 'reMarkable',
    price: 'from 649€',
    category: 'Tech',
    image: 'https://framerusercontent.com/images/otKOXgZJ2WPsYQaDEF2ZuZPYFkY.png',
    slug: 'remarkable-paper-pro',
    externalUrl: 'https://remarkable.com/store/remarkable-paper/pro',
  },
  {
    name: 'SLUSHi Frozen Drink Machine',
    brand: 'Ninja',
    price: '$299',
    category: 'Home',
    image: 'https://framerusercontent.com/images/eikNTvTnAH514H9paHiLaqtKi8.png',
    slug: 'ninja-slushi-professional-frozen-drink-maker',
    externalUrl: 'https://www.ninjakitchen.com/products/ninja-slushi-professional-frozen-drink-maker-zidFS301',
  },
  {
    name: 'Mercedes-Benz G 500',
    brand: 'Lego',
    price: '$249',
    category: 'Toys',
    image: 'https://framerusercontent.com/images/kGFFmyRXr6bkYatLcmsMhvfHJik.png',
    slug: 'mercedes-benz-g-500',
    externalUrl: 'https://www.lego.com/en-us/product/mercedes-benz-g-500-professional-line-42177',
  },
  {
    name: 'Electric Spin Scrubber',
    brand: 'HOTO',
    price: '$99',
    category: 'Home',
    image: 'https://framerusercontent.com/images/J3p9uhK7aRbp6sDZJgwtsDupgsA.png',
    slug: 'hoto-electric-spin-scrubber',
    externalUrl: 'https://hototools.com/products/electric-spin-scrubber',
  },
  {
    name: 'Dialog Fountain Pen',
    brand: 'LAMY',
    price: '$399',
    category: 'Office',
    image: 'https://framerusercontent.com/images/MIqTeGtXqSDO5lIf5laOppXJReY.png',
    slug: 'lamy-dialog-fountain-pen',
    externalUrl: 'https://us-shop.lamy.com/en_us/fountain-pen-lamy-dialog.html',
  },
  {
    name: 'Ace',
    brand: 'Sonos',
    price: '499€',
    category: 'Tech',
    image: 'https://framerusercontent.com/images/EGdsgfo2SszCHMuCyfpxO4MBjpY.png',
    slug: 'sonos-ace',
    externalUrl: 'https://www.sonos.com/fr-be/shop/sonos-ace-white',
  },
  {
    name: 'Zodiac L Mirror',
    brand: 'Moustache',
    price: '1700€',
    category: 'Home',
    image: 'https://framerusercontent.com/images/veZowDXPzfctfJxoY2uk2yc.png',
    slug: 'moustache-zodiac-l-mirror-jean-baptiste-fastrez',
    externalUrl: 'https://www.moustache.fr/en/miroirs/1111-2753-zodiac.html',
  },
  {
    name: 'The Creative Act: A Way of Being',
    brand: 'Rick Rubin',
    price: '26€',
    category: 'Culture',
    image: 'https://framerusercontent.com/images/SUeyg7TLfpIYzmmen3WzpI4Z0.png',
    slug: 'rick-rubin-the-creative-act-a-way-of-being',
    externalUrl: 'https://www.yvon-lambert.com/products/rick-rubin-the-creative-act-a-way-of-being',
  },
  {
    name: 'Denim Mexican Tuxedo Westerner Jacket',
    brand: 'Kapital',
    price: '815€',
    category: 'Outfit',
    image: 'https://framerusercontent.com/images/ownM0QEoI9ysfDdIQbMR5tD3f6I.png',
    slug: 'kapital-11-5oz-denim-mexican-tuxedo-westerner-jacket',
    externalUrl: 'https://www.mrporter.com/en-fr/mens/product/kapital/clothing/denim-jackets/crochet-trimmed-denim-jacket',
  },
  {
    name: 'Oracle Touch',
    brand: 'Sage',
    price: '2599€',
    category: 'Home',
    image: 'https://framerusercontent.com/images/JCF3f6u4WOkPsoEks5ruYnxW3jI.png',
    slug: 'sage-oracle-touch',
    externalUrl: 'https://www.sageappliances.com/eu/fr/products/espresso/bes990.html',
  },
  {
    name: 'Aluminium Hanger',
    brand: 'Tonari Design',
    price: '¥2,500',
    category: 'Outdoor',
    image: 'https://framerusercontent.com/images/3M8wnzk9yRhbr6XupuiMoo5g.png',
    slug: 'tonari-design-aluminium-hanger',
    externalUrl: 'https://tonaridesign.base.shop/items/56593827',
  },
];

// Grid pattern for asymmetric layout - cycle through varied sizes
const gridPatterns = [
  { size: 'large' },   // 0: Featured - spans 2x2
  { size: 'normal' },  // 1: Standard
  { size: 'tall' },    // 2: Tall - spans 1x2
  { size: 'normal' },  // 3: Standard
  { size: 'wide' },    // 4: Wide - spans 2x1
  { size: 'normal' },  // 5: Standard
  { size: 'normal' },  // 6: Standard
  { size: 'tall' },    // 7: Tall
  { size: 'normal' },  // 8: Standard
  { size: 'large' },   // 9: Featured
  { size: 'normal' },  // 10: Standard
  { size: 'normal' },  // 11: Standard
];

// Assign grid sizes to products
const productsWithLayout = products.map((product, index) => ({
  ...product,
  gridSize: gridPatterns[index % gridPatterns.length].size,
}));
---

<section class="products-section">
  <!-- Section header -->
  <div class="section-header" data-animate>
    <div class="section-header-left">
      <span class="section-label">The Collection</span>
      <h2 class="section-title">
        <span class="section-title-line">Selected</span>
        <span class="section-title-line section-title-line--accent">Products</span>
      </h2>
    </div>
    <div class="section-header-right">
      <p class="section-description">
        A curated selection of products that deserve your attention.
        Quality over quantity, always.
      </p>
      <div class="section-stats">
        <div class="stat">
          <span class="stat-number">{products.length}</span>
          <span class="stat-label">Items</span>
        </div>
        <div class="stat">
          <span class="stat-number">9</span>
          <span class="stat-label">Categories</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Product grid - asymmetric layout -->
  <div class="product-grid" data-product-grid>
    {productsWithLayout.map((product, index) => (
      <ProductCard {...product} index={index} />
    ))}
  </div>

  <!-- Load more button -->
  <div class="load-more-wrapper" data-animate>
    <button class="load-more" data-load-more data-magnetic>
      <span class="load-more-text">Load More Items</span>
      <span class="load-more-icon">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
          <path d="M10 4V16M10 16L5 11M10 16L15 11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </span>
    </button>
  </div>
</section>

<style>
  .products-section {
    padding: calc(var(--header-height, 80px) + 2rem) 2rem 6rem;
    max-width: 1600px;
    margin: 0 auto;
  }

  /* Section header */
  .section-header {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 4rem;
    margin-bottom: 4rem;
    padding-bottom: 3rem;
    border-bottom: 1px solid rgba(245, 240, 232, 0.06);
  }

  .section-label {
    display: inline-block;
    font-family: var(--font-body);
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--color-gold);
    letter-spacing: 0.15em;
    text-transform: uppercase;
    margin-bottom: 1rem;
    padding: 0.5rem 1rem;
    background: var(--color-gold-muted);
    border-radius: var(--radius-full);
  }

  .section-title {
    font-family: var(--font-display);
    font-size: clamp(2.5rem, 5vw, 4rem);
    font-weight: 600;
    color: var(--color-cream);
    line-height: 1.1;
    letter-spacing: -0.03em;
    margin: 0;
  }

  .section-title-line {
    display: block;
  }

  .section-title-line--accent {
    -webkit-text-stroke: 1px var(--color-cream);
    -webkit-text-fill-color: transparent;
  }

  .section-header-right {
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
  }

  .section-description {
    font-family: var(--font-body);
    font-size: 1rem;
    color: var(--color-text-muted);
    line-height: 1.7;
    max-width: 400px;
    margin-bottom: 2rem;
  }

  .section-stats {
    display: flex;
    gap: 3rem;
  }

  .stat {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .stat-number {
    font-family: var(--font-display);
    font-size: 2.5rem;
    font-weight: 600;
    color: var(--color-cream);
    line-height: 1;
  }

  .stat-label {
    font-family: var(--font-body);
    font-size: 0.8125rem;
    color: var(--color-text-muted);
    letter-spacing: 0.05em;
  }

  /* Product grid - Asymmetric 4-column layout */
  .product-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-auto-rows: minmax(280px, auto);
    gap: 1.25rem;
    margin-bottom: 4rem;
  }

  /* Load more button */
  .load-more-wrapper {
    display: flex;
    justify-content: center;
  }

  .load-more {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem 2.5rem;
    background: transparent;
    border: 1px solid rgba(245, 240, 232, 0.15);
    border-radius: var(--radius-full);
    color: var(--color-cream);
    font-family: var(--font-body);
    font-size: 0.9375rem;
    font-weight: 500;
    transition: all 0.4s var(--ease-out-expo);
    overflow: hidden;
    position: relative;
  }

  .load-more::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--color-gold);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.5s var(--ease-out-expo);
    z-index: -1;
  }

  .load-more:hover::before {
    transform: scaleX(1);
  }

  .load-more:hover {
    border-color: var(--color-gold);
    color: var(--color-bg);
  }

  .load-more-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.4s var(--ease-out-expo);
  }

  .load-more:hover .load-more-icon {
    transform: translateY(4px);
  }

  /* Responsive */
  @media (max-width: 1200px) {
    .product-grid {
      grid-template-columns: repeat(3, 1fr);
      grid-auto-rows: minmax(260px, auto);
    }
  }

  @media (max-width: 1024px) {
    .product-grid {
      grid-template-columns: repeat(2, 1fr);
      grid-auto-rows: minmax(240px, auto);
    }
  }

  @media (max-width: 768px) {
    .products-section {
      padding: 3rem 1.5rem 4rem;
    }

    .section-header {
      grid-template-columns: 1fr;
      gap: 2rem;
    }

    .product-grid {
      grid-template-columns: 1fr;
      grid-auto-rows: auto;
      gap: 1rem;
    }
  }
</style>

<script>
  // Category filtering
  document.addEventListener('categoryChange', ((e: CustomEvent) => {
    const category = e.detail.category;
    const cards = document.querySelectorAll('.product-card');

    cards.forEach(card => {
      const cardCategory = card.getAttribute('data-category');
      if (category === 'all' || cardCategory?.toLowerCase() === category.toLowerCase()) {
        card.classList.remove('hidden');
      } else {
        card.classList.add('hidden');
      }
    });
  }) as EventListener);
</script>
